# Archivo con la configuración de Travis CI, sistema
#   de integración continua

# Sólo se ejecuta con Python 3.5
language: python
python:
  - "3.6"

addons:
  apt:
    packages:
      - oracle-java8-set-default

env:
  - HTMLVALIDATOR_VNU_URL=http://localhost:8888/

before_install:
  - nvm install 6
  - nvm use 6

# Hay que instalar las dependencias
install:
  - npm install
  - pip install -r requirements.txt
  - pip install -r dev-requirements.txt
  - (cd html5validation && ./install.sh)

before_script:
  - (cd html5validation && ./run.sh)
  - sleep 10

# Estos son los tests que se ejecutarán
script:
    - npm run lint
    - isort --check-only
    - flake8
    - pytest --cov=./ --cov-report=xml

# Lanza página para medir cobertura
# Se puede ver en https://codecov.io/gh/abertal/alpha
after_success:
    - bash <(curl -s https://codecov.io/bash)
